<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Live Resolution Builder - PyleaMUN</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <header>
    <img src="logo.png" alt="PyleaMUN Logo" id="logo" />
    <h1>Live Resolution Builder</h1>
  </header>
  <main>
    <div id="login-container">
      <h3>Role:</h3>
      <select id="role">
        <option value="delegate">Delegate</option>
        <option value="chair">Chair</option>
      </select>

      <div id="chair-password" style="display:none;">
        <h3>Chair Password:</h3>
        <input type="password" id="chair-password-input" placeholder="Enter chair password" />
      </div>

      <h3>Committee:</h3>
      <select id="committee">
        <option value="unep">UNEP</option>
        <option value="security">Security Council</option>
        <option value="ecosoc">ECOSOC</option>
        <option value="unesco">UNESCO</option>
        <option value="nato">NATO</option>
        <option value="who">WHO</option>
        <option value="hrc">HRC</option>
        <option value="unwomen">UN Women</option>
      </select>
      <input type="password" id="committee-code" placeholder="Enter committee code" />

      <div id="delegate-bloc-container" style="display:none;">
        <h3>Join Bloc:</h3>
        <select id="available-blocs">
          <option value="">Select a bloc</option>
        </select>
        <input type="password" id="bloc-password" placeholder="Bloc password" />
      </div>

      <button id="enter-button">Enter</button>
    </div>

    <div id="editor-container" style="display:none;">
      <div id="info-bar">
        <span id="user-info"></span>
        <button id="lock-toggle">üîí Lock</button>
        <span id="timer">00:00</span>
        <button id="set-timer">‚è±Ô∏è Set Timer</button>
        <button id="start-timer">‚ñ∂Ô∏è</button>
        <button id="pause-timer">‚è∏Ô∏è</button>
        <button id="reset-timer">‚èπÔ∏è</button>
        <button id="export-pdf">üìÑ Export PDF</button>
      </div>

      <div id="chair-controls" style="display:none;">
        <div class="chair-section">
          <h3>Create New Bloc:</h3>
          <input type="text" id="new-bloc-name" placeholder="Bloc name" />
          <input type="password" id="new-bloc-password" placeholder="Bloc password" />
          <button id="create-bloc-button">Create Bloc</button>
        </div>
        <div id="existing-blocs"></div>
      </div>

      <div id="bloc-selector" style="display:none;">
        <h4>Select Bloc to View:</h4>
        <select id="chair-bloc-select">
          <option value="">Select a bloc</option>
        </select>
      </div>

      <div id="resolution-header">
        <div class="header-field">
          <label>FORUM:</label>
          <input type="text" id="forum" placeholder="Enter forum name" />
        </div>
        <div class="header-field">
          <label>QUESTION OF:</label>
          <input type="text" id="question-of" placeholder="Enter question" />
        </div>
        <div class="header-field">
          <label>SUBMITTED BY:</label>
          <input type="text" id="submitted-by" placeholder="Enter submitting countries" />
        </div>
        <div class="header-field">
          <label>CO-SUBMITTED BY:</label>
          <input type="text" id="co-submitted-by" placeholder="Enter co-submitting countries" />
        </div>
      </div>

      <div id="clauses">
        <h3>Preambulatory Clauses</h3>
        <div id="preambulatory-buttons"></div>
        <h3>Operative Clauses</h3>
        <div id="operative-buttons"></div>
      </div>

      <div id="resolution-display">
        <h3>Resolution Preview</h3>
        <textarea id="resolution-text" readonly style="background: #f8f9fa; border: 2px solid #dee2e6;"></textarea>
      </div>

      <div id="comments-section">
        <h3>Comments</h3>
        <div id="comments-list"></div>
        <div id="comment-controls">
          <input type="text" id="comment-input" placeholder="Add a comment (chairs only)" />
          <button id="add-comment">Add Comment</button>
        </div>
      </div>
    </div>
  </main>

  <!-- Firebase SDKs (using compat versions for global 'firebase' object) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

  <script type="module">
    // Your web app's Firebase configuration (REPLACE THIS WITH YOUR ACTUAL CONFIG)
    const firebaseConfig = {
      apiKey: "AIzaSyC_IHwSSoRxcysu4QZRewZdqhhD1LuF0xQ",
      authDomain: "pyleamun-resolution-builder.firebaseapp.com",
      projectId: "pyleamun-resolution-builder",
      storageBucket: "pyleamun-resolution-builder.firebasestorage.app",
      messagingSenderId: "249510999834",
      appId: "1:249510999834:web:b6e714939292210fd19ea3"
    };

    // Initialize Firebase and make instances globally available
    firebase.initializeApp(firebaseConfig);
    window.db = firebase.firestore(); // Make firestore instance globally accessible
    window.auth = firebase.auth();   // Make auth instance globally accessible
    window.appId = 'pyleamun-app';   // Consistent app ID for Firestore paths
  </script>
  <!-- Import and run your app logic -->
  <script type="module" src="./app.js"></script>
</body>
</html>
